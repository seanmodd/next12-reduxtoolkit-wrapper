{"ast":null,"code":"import _regeneratorRuntime from \"/Users/seanmodd/Dev/GitHubYouTube/kirill-konshin next-redux-wrapper master packages-demo-redux-toolkit/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/seanmodd/Dev/GitHubYouTube/kirill-konshin next-redux-wrapper master packages-demo-redux-toolkit/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/seanmodd/Dev/GitHubYouTube/kirill-konshin next-redux-wrapper master packages-demo-redux-toolkit/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { configureStore, createSlice } from '@reduxjs/toolkit';\nimport { createWrapper, HYDRATE } from 'next-redux-wrapper';\nexport var subjectSlice = createSlice({\n  name: 'subject',\n  initialState: {},\n  reducers: {\n    setEnt: function setEnt(state, action) {\n      return action.payload;\n    }\n  },\n  extraReducers: _defineProperty({}, HYDRATE, function (state, action) {\n    console.log('HYDRATE', state, action.payload);\n    return _objectSpread(_objectSpread({}, state), action.payload.subject);\n  })\n});\n\nvar makeStore = function makeStore() {\n  return configureStore({\n    reducer: _defineProperty({}, subjectSlice.name, subjectSlice.reducer),\n    devTools: true\n  });\n};\n\nexport var fetchSubject = function fetchSubject(id) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var timeoutPromise;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              timeoutPromise = function timeoutPromise(timeout) {\n                return new Promise(function (resolve) {\n                  return setTimeout(resolve, timeout);\n                });\n              };\n\n              _context.next = 3;\n              return timeoutPromise(200);\n\n            case 3:\n              dispatch(subjectSlice.actions.setEnt(_defineProperty({}, id, {\n                id: id,\n                name: \"Subject \".concat(id)\n              })));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var wrapper = createWrapper(makeStore);\nexport var selectSubject = function selectSubject(id) {\n  return function (state) {\n    var _state$subjectSlice$n;\n\n    return state === null || state === void 0 ? void 0 : (_state$subjectSlice$n = state[subjectSlice.name]) === null || _state$subjectSlice$n === void 0 ? void 0 : _state$subjectSlice$n[id];\n  };\n};","map":{"version":3,"sources":["/Users/seanmodd/Dev/GitHubYouTube/kirill-konshin next-redux-wrapper master packages-demo-redux-toolkit/store.tsx"],"names":["configureStore","createSlice","createWrapper","HYDRATE","subjectSlice","name","initialState","reducers","setEnt","state","action","payload","extraReducers","console","log","subject","makeStore","reducer","devTools","fetchSubject","id","dispatch","timeoutPromise","timeout","Promise","resolve","setTimeout","actions","wrapper","selectSubject"],"mappings":";;;;;;;;AAAA,SAAQA,cAAR,EAAwBC,WAAxB,QAAuD,kBAAvD;AAEA,SAAQC,aAAR,EAAuBC,OAAvB,QAAqC,oBAArC;AAEA,OAAO,IAAMC,YAAY,GAAGH,WAAW,CAAC;AACpCI,EAAAA,IAAI,EAAE,SAD8B;AAGpCC,EAAAA,YAAY,EAAE,EAHsB;AAKpCC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,MADM,kBACCC,KADD,EACQC,MADR,EACgB;AAClB,aAAOA,MAAM,CAACC,OAAd;AACH;AAHK,GAL0B;AAWpCC,EAAAA,aAAa,sBACRT,OADQ,EACE,UAACM,KAAD,EAAQC,MAAR,EAAmB;AAC1BG,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBL,KAAvB,EAA8BC,MAAM,CAACC,OAArC;AACA,2CACOF,KADP,GAEOC,MAAM,CAACC,OAAP,CAAeI,OAFtB;AAIH,GAPQ;AAXuB,CAAD,CAAhC;;AAsBP,IAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA,SACdhB,cAAc,CAAC;AACXiB,IAAAA,OAAO,sBACFb,YAAY,CAACC,IADX,EACkBD,YAAY,CAACa,OAD/B,CADI;AAIXC,IAAAA,QAAQ,EAAE;AAJC,GAAD,CADA;AAAA,CAAlB;;AAYA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,EAAD;AAAA;AAAA,wEAAuB,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACzCC,cAAAA,cADyC,GACxB,SAAjBA,cAAiB,CAACC,OAAD;AAAA,uBAAqB,IAAIC,OAAJ,CAAY,UAAAC,OAAO;AAAA,yBAAIC,UAAU,CAACD,OAAD,EAAUF,OAAV,CAAd;AAAA,iBAAnB,CAArB;AAAA,eADwB;;AAAA;AAAA,qBAGzCD,cAAc,CAAC,GAAD,CAH2B;;AAAA;AAK/CD,cAAAA,QAAQ,CACJjB,YAAY,CAACuB,OAAb,CAAqBnB,MAArB,qBACKY,EADL,EACU;AACFA,gBAAAA,EAAE,EAAFA,EADE;AAEFf,gBAAAA,IAAI,oBAAae,EAAb;AAFF,eADV,EADI,CAAR;;AAL+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAvB;;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB;AAeP,OAAO,IAAMQ,OAAO,GAAG1B,aAAa,CAAWc,SAAX,CAA7B;AAEP,OAAO,IAAMa,aAAa,GAAG,SAAhBA,aAAgB,CAACT,EAAD;AAAA,SAAa,UAACX,KAAD;AAAA;;AAAA,WAAqBA,KAArB,aAAqBA,KAArB,gDAAqBA,KAAK,CAAGL,YAAY,CAACC,IAAhB,CAA1B,0DAAqB,sBAA6Be,EAA7B,CAArB;AAAA,GAAb;AAAA,CAAtB","sourcesContent":["import {configureStore, createSlice, ThunkAction} from '@reduxjs/toolkit';\nimport {Action} from 'redux';\nimport {createWrapper, HYDRATE} from 'next-redux-wrapper';\n\nexport const subjectSlice = createSlice({\n    name: 'subject',\n\n    initialState: {} as any,\n\n    reducers: {\n        setEnt(state, action) {\n            return action.payload;\n        },\n    },\n\n    extraReducers: {\n        [HYDRATE]: (state, action) => {\n            console.log('HYDRATE', state, action.payload);\n            return {\n                ...state,\n                ...action.payload.subject,\n            };\n        },\n    },\n});\n\nconst makeStore = () =>\n    configureStore({\n        reducer: {\n            [subjectSlice.name]: subjectSlice.reducer,\n        },\n        devTools: true,\n    });\n\nexport type AppStore = ReturnType<typeof makeStore>;\nexport type AppState = ReturnType<AppStore['getState']>;\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType, AppState, unknown, Action>;\n\nexport const fetchSubject = (id: any): AppThunk => async dispatch => {\n    const timeoutPromise = (timeout: number) => new Promise(resolve => setTimeout(resolve, timeout));\n\n    await timeoutPromise(200);\n\n    dispatch(\n        subjectSlice.actions.setEnt({\n            [id]: {\n                id,\n                name: `Subject ${id}`,\n            },\n        }),\n    );\n};\n\nexport const wrapper = createWrapper<AppStore>(makeStore);\n\nexport const selectSubject = (id: any) => (state: AppState) => state?.[subjectSlice.name]?.[id];\n"]},"metadata":{},"sourceType":"module"}